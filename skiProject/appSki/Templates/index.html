{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block titulo %}{% trans 'Portada' %}{% endblock %}


{% block contenido %}
<div class="portada">

    {% for estacion in estaciones_filtradas %}
        <div class="localidad">
            <h2>{{estacion.localidad.nombre}}</h2>
            
            {% with estacion_filtrada=estacion %}
                {% if estacion_filtrada %}
                <h3><a href="{% url 'estacion' estacion_filtrada.id %}">{{estacion_filtrada.nombre}}</a></h3>
                    <div class="imagenPortada">
                        {% with "images/"|add:estacion_filtrada.nombre|add:".jpg" as imagen %}
                            <img src="{% static imagen %}" alt="{{ estacion_filtrada.nombre }}">
                        {% endwith %}
                    </div>
                {% endif %}
            {% endwith %}
        </div>

    {% endfor %}
</div>

<script>
    // Primero se verifica si el mensaje ya se ha mostrado antes
    if (!localStorage.getItem('mensajeMostrado')) {
        // solo se muestra si no se ha mostrado antes
        alert("¡Bienvenid@ a nuestra página de esquí! Descubre las mejores estaciones, pistas y una gran cartelera de servicios para unas vacaciones increíbles.");
        // hay q marcar el mensaje como mostrado para que no aparezca nuevamente
        localStorage.setItem('mensajeMostrado', 'true');
    }
</script>
{% endblock %}

